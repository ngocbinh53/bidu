<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>💞 Vòng quay tình yêu của Kim Dung 💞</title>
  <style>
    body {
      margin:0; padding:0;
      font-family:"Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg, #ffe4e9, #ffd6e3);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      height:100vh;
      color:#444;
    }
    .heart-fall {
      position:absolute;
      top:-50px;
      font-size:20px;
      color:#ff69b4;
      animation: fall 4s linear infinite;
      pointer-events:none;
    }
    @keyframes fall {
      0% { transform: translateY(0) scale(0.8); opacity:1; }
      100% { transform: translateY(700px) scale(1.4); opacity:0; }
    }
    .wheel-container {
      position:relative;
      width:400px; height:400px;
    }
    canvas#wheel {
      width:400px; height:400px;
      border-radius:50%;
      border:10px solid #fff;
      box-shadow:0 0 30px #ff99cc;
      transition: transform 8s cubic-bezier(0.33,1,0.68,1);
    }
    .center-text {
      position:absolute;
      top:50%; left:50%;
      transform:translate(-50%,-50%);
      font-size:1.4em;
      color:#fff;
      text-shadow:0 0 8px #ff69b4;
      cursor:pointer;
      user-select:none;
    }
    .pointer {
      position:absolute;
      right:-30px;
      top:50%;
      transform: translateY(-50%);
      width:0; height:0;
      border-top:20px solid transparent;
      border-bottom:20px solid transparent;
      border-left:30px solid gold;
      filter: drop-shadow(0 0 5px #ffb400);
    }
    #result {
      margin-top:30px;
      font-size:1.6em;
      color:#ff1493;
      text-shadow:0 0 10px white;
      text-align:center;
    }
    .kitty {
      position:absolute;
      bottom:10px; right:10px;
      width:120px; animation: wave 2s infinite alternate;
    }
    @keyframes wave {
      0% { transform: rotate(-5deg); }
      100% { transform: rotate(5deg); }
    }
  </style>
</head>
<body>

  <!-- hình Hello Kitty vẫy tay -->
  <img class="kitty" src="https://upload.wikimedia.org/wikipedia/commons/3/30/Hello_Kitty_character.png" alt="Hello Kitty">

  <div class="wheel-container">
    <canvas id="wheel" width="400" height="400"></canvas>
    <div class="center-text" id="spinText">💘 Click để quay 💘</div>
    <div class="pointer"></div>
  </div>

  <div id="result"></div>

  <!-- Nhạc nền từ YouTube -->
  <iframe width="0" height="0"
    src="https://www.youtube.com/embed/YeiaMdi4uiw?autoplay=1&loop=1&playlist=YeiaMdi4uiw"
    frameborder="0" allow="autoplay; encrypted-media"></iframe>

  <script>
    const gifts = ["Son", "Gấu bông", "Hoa", "Ăn lẩu", "Trang sức", "Túi xách", "Nước hoa", "Đi làm đẹp", "Quần áo"];
    const colors = ["#ff99cc","#ffc0cb","#ffe4e1","#ffb6d2","#ff80b3","#ff6699","#ff4d88","#ff3366","#ff1a4d"];
    const canvas = document.getElementById("wheel");
    const ctx = canvas.getContext("2d");
    const radius = canvas.width/2;
    const arc = (2*Math.PI)/gifts.length;
    const resultEl = document.getElementById("result");
    const spinText = document.getElementById("spinText");
    let rotation = 0;
    let spinning=false;

    function drawWheel(){
      for(let i=0;i<gifts.length;i++){
        const angle = i*arc;
        ctx.beginPath();
        ctx.fillStyle = colors[i%colors.length];
        ctx.moveTo(radius,radius);
        ctx.arc(radius,radius,radius, angle, angle+arc);
        ctx.fill();
        ctx.save();
        ctx.translate(radius,radius);
        ctx.rotate(angle + arc/2);
        ctx.textAlign="right";
        ctx.fillStyle="#fff";
        ctx.font="bold 18px Arial";
        ctx.fillText(gifts[i], radius-10, 10);
        ctx.restore();
      }
    }

    drawWheel();

    spinText.addEventListener("click",()=>{
      if(spinning) return;
      spinning=true;
      resultEl.innerHTML="";
      const spinAngle = 360*8 + Math.random()*360;
      rotation += spinAngle;
      canvas.style.transform = `rotate(${rotation}deg)`;

      setTimeout(()=>{
        const deg = rotation%360;
        const index = Math.floor((gifts.length - deg/360 * gifts.length) % gifts.length);
        const gift = gifts[index];
        resultEl.innerHTML = `💝 Chúc mừng Kim Dung! Bạn trúng <b>${gift}</b> 💝<br><span style="font-size:1.3em;">Anh yêu em hơn cả yêu 💗</span>`;
        heartFall();
        spinning=false;
      },8000);
    });

    function heartFall(){
      for(let i=0;i<20;i++){
        const h = document.createElement("div");
        h.className="heart-fall";
        h.style.left = Math.random()*window.innerWidth + "px";
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),4000);
      }
    }

    // thêm rơi tim nền liên tục
    setInterval(heartFall,2000);
  </script>

</body>
</html>
